<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Match - English-Chinese Vocabulary Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes disappear {
            to { opacity: 0; transform: scale(0); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .card {
            animation: fadeIn 0.3s ease-out;
            transition: all 0.2s;
        }
        
        .card:hover {
            box-shadow: 0 0 0 2px white;
        }
        
        .chinese-word {
            background-color: rgba(254, 226, 226, 0.7);
        }
        
        .progress-bar {
            transition: width 0.3s ease;
        }
        
        .divider {
            width: 2px;
            background: linear-gradient(to bottom, transparent, #94a3b8, transparent);
        }
        
        .word-column {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.75rem;
        }
        
        .chinese-font {
            font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
        }
        
        .difficulty-btn {
            transition: all 0.2s;
        }
        
        .difficulty-btn.active {
            transform: scale(1.05);
            box-shadow: 0 0 0 2px white;
        }
        
        .easy-theme { background-color: #10b981; }
        .medium-theme { background-color: #f59e0b; }
        .hard-theme { background-color: #ef4444; }
        
        .modal-content {
            animation: fadeIn 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-indigo-800 mb-2">Word Match</h1>
            <p class="text-lg text-indigo-600">English-Chinese Vocabulary Game</p>
            <div class="flex justify-center gap-4 mt-2">
                <p class="text-sm text-indigo-400">Set: <span id="currentSet">1</span>/<span id="totalSets">20</span></p>
                <p class="text-sm text-indigo-400">Total Accuracy: <span id="totalAccuracy">0</span>%</p>
            </div>
            <div class="mt-4">
                <div class="bg-gray-200 h-2 rounded-full">
                    <div id="progressBar" class="progress-bar bg-indigo-600 h-2 rounded-full" style="width: 0%"></div>
                </div>
            </div>
        </header>

        <div class="max-w-6xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden">
            <div class="bg-indigo-700 text-white p-4 flex flex-col md:flex-row justify-between items-center">
                <div class="flex gap-4 mb-4 md:mb-0">
                    <button id="easyBtn" class="difficulty-btn easy-theme text-white px-4 py-2 rounded-lg hover:opacity-90 transition active">Easy</button>
                    <button id="mediumBtn" class="difficulty-btn medium-theme text-white px-4 py-2 rounded-lg hover:opacity-90 transition">Medium</button>
                    <button id="hardBtn" class="difficulty-btn hard-theme text-white px-4 py-2 rounded-lg hover:opacity-90 transition">Hard</button>
                </div>
                <div class="flex gap-4">
                    <button id="nextSetBtn" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition">Next Set</button>
                    <button id="restartBtn" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">Restart</button>
                </div>
            </div>
            
            <div class="flex flex-col md:flex-row">
                <div id="englishColumn" class="w-full md:w-1/2 p-4 word-column"></div>
                <div class="divider mx-4 hidden md:block"></div>
                <div id="chineseColumn" class="w-full md:w-1/2 p-4 word-column"></div>
            </div>
            
            <div id="message" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10">
                <div class="modal-content bg-white p-8 rounded-xl text-center max-w-md mx-4">
                    <h2 id="messageTitle" class="text-3xl font-bold mb-4"></h2>
                    <p id="messageText" class="text-lg mb-6"></p>
                    <div id="messageStats" class="mb-4 text-left"></div>
                    <div class="flex justify-center gap-4">
                        <button id="messageBtn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition">Continue</button>
                        <button id="closeModalBtn" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Word sets (same as previous, 540 pairs)
        const wordSets = {
            easy: [
                [{ english: "apple", chinese: "苹果" }, { english: "book", chinese: "书" }, { english: "cat", chinese: "猫" }, { english: "dog", chinese: "狗" }, { english: "egg", chinese: "鸡蛋" }, { english: "fish", chinese: "鱼" }, { english: "girl", chinese: "女孩" }, { english: "tree", chinese: "树" }, { english: "house", chinese: "房子" }],
                // ... (remaining 19 easy sets, identical to previous script)
                [{ english: "doll", chinese: "洋娃娃" }, { english: "ball", chinese: "球" }, { english: "car", chinese: "玩具车" }, { english: "block", chinese: "积木" }, { english: "puzzle", chinese: "拼图" }, { english: "kite", chinese: "风筝" }, { english: "robot", chinese: "机器人" }, { english: "train", chinese: "玩具火车" }, { english: "bear", chinese: "泰迪熊" }]
            ],
            medium: [
                [{ english: "beautiful", chinese: "美丽" }, { english: "big", chinese: "大" }, { english: "clean", chinese: "干净" }, { english: "fast", chinese: "快" }, { english: "good", chinese: "好" }, { english: "happy", chinese: "快乐" }, { english: "new", chinese: "新" }, { english: "small", chinese: "小" }, { english: "strong", chinese: "强" }],
                // ... (remaining 19 medium sets)
                [{ english: "spring", chinese: "春天" }, { english: "summer", chinese: "夏天" }, { english: "autumn", chinese: "秋天" }, { english: "winter", chinese: "冬天" }, { english: "season", chinese: "季节" }, { english: "warm", chinese: "温暖" }, { english: "cool", chinese: "凉爽" }, { english: "hot", chinese: "热" }, { english: "cold", chinese: "冷" }]
            ],
            hard: [
                [{ english: "government", chinese: "政府" }, { english: "president", chinese: "总统" }, { english: "prime minister", chinese: "总理" }, { english: "minister", chinese: "部长" }, { english: "leader", chinese: "领导" }, { english: "party", chinese: "党" }, { english: "election", chinese: "选举" }, { english: "policy", chinese: "政策" }, { english: "democracy", chinese: "民主" }],
                // ... (remaining 19 hard sets)
                [{ english: "war", chinese: "战争" }, { english: "revolution", chinese: "革命" }, { english: "empire", chinese: "帝国" }, { english: "dynasty", chinese: "王朝" }, { english: "treaty", chinese: "条约" }, { english: "invasion", chinese: "入侵" }, { english: "colony", chinese: "殖民地" }, { english: "artifact", chinese: "文物" }, { english: "civilization", chinese: "文明" }]
            ]
        };

        // Game state
        let state = {
            currentDifficulty: 'easy',
            currentSetIndex: 0,
            selectedEnglish: null,
            selectedChinese: null,
            correctMatches: 0,
            attempts: 0,
            totalCorrect: 0,
            totalAttempts: 0
        };

        // DOM elements
        const elements = {
            currentSet: document.getElementById('currentSet'),
            totalSets: document.getElementById('totalSets'),
            totalAccuracy: document.getElementById('totalAccuracy'),
            progressBar: document.getElementById('progressBar'),
            englishColumn: document.getElementById('englishColumn'),
            chineseColumn: document.getElementById('chineseColumn'),
            message: document.getElementById('message'),
            messageTitle: document.getElementById('messageTitle'),
            messageText: document.getElementById('messageText'),
            messageStats: document.getElementById('messageStats'),
            messageBtn: document.getElementById('messageBtn'),
            closeModalBtn: document.getElementById('closeModalBtn'),
            easyBtn: document.getElementById('easyBtn'),
            mediumBtn: document.getElementById('mediumBtn'),
            hardBtn: document.getElementById('hardBtn'),
            nextSetBtn: document.getElementById('nextSetBtn'),
            restartBtn: document.getElementById('restartBtn')
        };

        // Sound effects
        const sounds = {
            correct: new Audio('https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-reward-952.mp3'),
            incorrect: new Audio('https://assets.mixkit.co/sfx/preview/mixkit-error-trombone-632.mp3')
        };

        // Initialize game
        function initGame() {
            state.correctMatches = 0;
            state.attempts = 0;
            state.selectedEnglish = null;
            state.selectedChinese = null;
            loadSet();
            updateUI();
        }

        // Load current set
        function loadSet() {
            const currentWords = wordSets[state.currentDifficulty][state.currentSetIndex];
            elements.englishColumn.innerHTML = '';
            elements.chineseColumn.innerHTML = '';

            const shuffledWords = shuffleArray([...currentWords]);

            shuffledWords.forEach(word => {
                const card = document.createElement('div');
                card.className = 'card bg-indigo-100 p-4 rounded-lg cursor-pointer text-center';
                card.textContent = word.english;
                card.dataset.english = word.english;
                card.addEventListener('click', () => selectEnglishCard(card, word.english));
                elements.englishColumn.appendChild(card);
            });

            shuffleArray([...currentWords]).forEach(word => {
                const card = document.createElement('div');
                card.className = 'card chinese-word p-4 rounded-lg cursor-pointer text-center chinese-font';
                card.textContent = word.chinese;
                card.dataset.chinese = word.chinese;
                card.addEventListener('click', () => selectChineseCard(card, word.chinese));
                elements.chineseColumn.appendChild(card);
            });
        }

        // Shuffle array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Select English card
        function selectEnglishCard(card, english) {
            if (state.selectedEnglish === card) {
                card.classList.remove('bg-indigo-300');
                state.selectedEnglish = null;
            } else {
                if (state.selectedEnglish) {
                    state.selectedEnglish.classList.remove('bg-indigo-300');
                }
                card.classList.add('bg-indigo-300');
                state.selectedEnglish = card;
                checkMatch();
            }
        }

        // Select Chinese card
        function selectChineseCard(card, chinese) {
            if (state.selectedChinese === card) {
                card.classList.remove('bg-red-300');
                state.selectedChinese = null;
            } else {
                if (state.selectedChinese) {
                    state.selectedChinese.classList.remove('bg-red-300');
                }
                card.classList.add('bg-red-300');
                state.selectedChinese = card;
                checkMatch();
            }
        }

        // Check for match
        function checkMatch() {
            if (state.selectedEnglish && state.selectedChinese) {
                state.attempts++;
                state.totalAttempts++;
                const englishWord = state.selectedEnglish.dataset.english;
                const chineseWord = state.selectedChinese.dataset.chinese;
                const currentWords = wordSets[state.currentDifficulty][state.currentSetIndex];
                const isMatch = currentWords.some(word => word.english === englishWord && word.chinese === chineseWord);

                if (isMatch) {
                    state.correctMatches++;
                    state.totalCorrect++;
                    state.selectedEnglish.style.animation = 'pulse 0.3s, disappear 0.3s 0.3s forwards';
                    state.selectedChinese.style.animation = 'pulse 0.3s, disappear 0.3s 0.3s forwards';
                    sounds.correct.play();
                    if (state.correctMatches === currentWords.length) {
                        showMessage('Set Complete!', `You completed the set in ${state.attempts} attempts! Accuracy: ${Math.round((state.correctMatches / state.attempts) * 100)}%`);
                    }
                } else {
                    state.selectedEnglish.classList.add('bg-red-400', 'shake');
                    state.selectedChinese.classList.add('bg-red-400', 'shake');
                    sounds.incorrect.play();
                    setTimeout(() => {
                        state.selectedEnglish.classList.remove('bg-red-400', 'bg-indigo-300', 'shake');
                        state.selectedChinese.classList.remove('bg-red-400', 'bg-red-300', 'shake');
                    }, 500);
                }
                state.selectedEnglish = null;
                state.selectedChinese = null;
                updateUI();
            }
        }

        // Show message modal
        function showMessage(title, text) {
            elements.messageTitle.textContent = title;
            elements.messageText.textContent = text;
            elements.messageStats.innerHTML = `
                <p>Correct Matches: ${state.correctMatches}</p>
                <p>Attempts: ${state.attempts}</p>
                <p>Accuracy: ${state.attempts > 0 ? Math.round((state.correctMatches / state.attempts) * 100) : 0}%</p>
                <p>Total Accuracy: ${state.totalAttempts > 0 ? Math.round((state.totalCorrect / state.totalAttempts) * 100) : 0}%</p>
            `;
            elements.message.classList.remove('hidden');
            elements.messageBtn.focus();
        }

        // Update UI elements
        function updateUI() {
            elements.currentSet.textContent = state.currentSetIndex + 1;
            elements.totalSets.textContent = wordSets[state.currentDifficulty].length;
            elements.totalAccuracy.textContent = state.totalAttempts > 0 ? Math.round((state.totalCorrect / state.totalAttempts) * 100) : 0;
            elements.progressBar.style.width = `${((state.currentSetIndex + 1) / wordSets[state.currentDifficulty].length) * 100}%`;
            elements.easyBtn.classList.toggle('active', state.currentDifficulty === 'easy');
            elements.mediumBtn.classList.toggle('active', state.currentDifficulty === 'medium');
            elements.hardBtn.classList.toggle('active', state.currentDifficulty === 'hard');
        }

        // Event listeners
        elements.easyBtn.addEventListener('click', () => {
            state.currentDifficulty = 'easy';
            state.currentSetIndex = 0;
            initGame();
        });

        elements.mediumBtn.addEventListener('click', () => {
            state.currentDifficulty = 'medium';
            state.currentSetIndex = 0;
            initGame();
        });

        elements.hardBtn.addEventListener('click', () => {
            state.currentDifficulty = 'hard';
            state.currentSetIndex = 0;
            initGame();
        });

        elements.nextSetBtn.addEventListener('click', () => {
            state.currentSetIndex = (state.currentSetIndex + 1) % wordSets[state.currentDifficulty].length;
            initGame();
        });

        elements.restartBtn.addEventListener('click', () => {
            state = {
                currentDifficulty: 'easy',
                currentSetIndex: 0,
                selectedEnglish: null,
                selectedChinese: null,
                correctMatches: 0,
                attempts: 0,
                totalCorrect: 0,
                totalAttempts: 0
            };
            initGame();
        });

        elements.messageBtn.addEventListener('click', () => {
            elements.message.classList.add('hidden');
            state.currentSetIndex = (state.currentSetIndex + 1) % wordSets[state.currentDifficulty].length;
            initGame();
        });

        elements.closeModalBtn.addEventListener('click', () => {
            elements.message.classList.add('hidden');
        });

        // Keyboard accessibility for modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !elements.message.classList.contains('hidden')) {
                elements.message.classList.add('hidden');
                state.currentSetIndex = (state.currentSetIndex + 1) % wordSets[state.currentDifficulty].length;
                initGame();
            }
        });

        // Lazy-load word sets (simulated)
        function loadWordSets() {
            // In a real scenario, this could fetch sets from a server
            console.log('Word sets loaded');
            initGame();
        }

        // Start game
        loadWordSets();
    </script>
</body>
</html>
